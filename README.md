# BoardGame Analyzer

BoardGameGeek (BGG) APIを使用してボードゲーム情報を検索、分析、保存するためのStreamlitアプリケーションです。

## 概要

このアプリケーションは、BoardGameGeek APIを通じてボードゲームのデータを取得し、ゲームの複雑さ、学習曲線、メカニクスなどを分析するためのツールです。日本語UIで設計されており、ボードゲーム愛好家やボードゲームの情報を整理したい方に最適です。
yamlファイルをPCに保存できませんが動作感はhttps://boardgameanalyzer-gsmlbaspmgvf3arxttip4f.streamlit.app/で確認いただけます。

## 主な機能

- **ゲーム名での検索**: 名前を使ってBGGからボードゲームを検索
- **ゲームIDによる詳細情報取得**: ゲームIDを使用して詳細なゲーム情報を取得
- **データ分析**: ゲームの複雑さ、学習曲線、リプレイ性などを自動分析
- **YAMLデータ保存**: 取得したゲーム情報をYAML形式でローカルに保存
- **日本語名対応**: 日本語名があるゲームは日本語表示に対応
- **ラーニングカーブ分析**: ゲームの学習しやすさやマスターに必要な時間の推定

## インストール方法

1. このリポジトリをクローンまたはダウンロードします

```bash
git clone https://github.com/yourusername/boardgame-analyzer.git
cd boardgame-analyzer
```

2. 必要なライブラリをインストールします

```bash
pip install -r requirements.txt
```

または個別にインストールする場合:

```bash
pip install streamlit pandas requests pyyaml deepdiff
```

## 使用方法

1. ターミナルでアプリケーションを実行します

```bash
streamlit run app.py
```

2. ブラウザで自動的に開かれるアプリケーションにアクセスします（通常は http://localhost:8501）

## アプリの使い方

### ゲーム名で検索

1. サイドバーから「ゲーム名で検索」を選択
2. 検索したいゲーム名を入力
3. 完全一致検索を行いたい場合はチェックボックスをオン
4. 「検索」ボタンをクリック
5. 検索結果が表示され、各ゲームのゲームID、ゲーム名、発行年が表示されます

### ゲームIDで詳細情報を取得

1. サイドバーから「ゲームIDで詳細情報を取得」を選択
2. BGGのゲームIDを入力
3. 「詳細情報を取得」ボタンをクリック
4. 詳細情報が表示され、以下の情報を確認できます：
   - 基本情報（ゲーム名、発行年、平均評価）
   - プレイ人数情報（最適人数、対応人数）
   - 推奨年齢・プレイ時間
   - ゲームの複雑さ
   - ラーニングカーブ分析
   - ゲーム説明文
   - メカニクス、カテゴリ、ランキング、デザイナー、パブリッシャー情報

### YAMLでデータを保存

1. サイドバーから「YAMLでデータを保存」を選択
2. 保存したいゲームをドロップダウンリストから選択
3. ファイル名を入力（空白の場合は自動生成）
4. 「選択したゲームデータをYAMLに保存」ボタンをクリック
5. 保存が成功すると確認メッセージが表示されます

## 学習曲線分析システム

このアプリは独自のアルゴリズムを使用してボードゲームの学習曲線を分析します。以下の要素を考慮して分析が行われます：

### 分析に使用する要素

- **メカニクスの複雑さと数**: 各ゲームメカニクスに複雑さスコアを割り当て、総合的な複雑さを計算
- **BGGでの重さ評価（Weight）**: コミュニティによって評価された複雑さの指標
- **推奨年齢**: 公式およびコミュニティによる推奨年齢
- **ランキング情報**: BGGでの人気度と評価
- **リプレイ性**: ゲームの再プレイ価値

### 分析結果の指標

分析結果には以下の指標が含まれます：

- **初期学習の障壁（1〜5）**: ゲームを始めるための難易度
- **戦略の深さ（1〜5）**: ゲームの戦略的側面の複雑さと深さ
- **学習曲線タイプ**: 学習難易度の推移パターン（緩やか、中程度、急など）
- **リプレイ性（1〜5）**: ゲームを繰り返し遊ぶ価値と多様性
- **対象プレイヤータイプ**: どのようなプレイヤーに適しているか（初心者、熟練者など）

### 評価指標の計算方法

#### 初期学習の障壁

初期学習の障壁は、ゲームを始めるための難易度を表し、以下の要素から計算されます：

- メカニクスの平均複雑さ（60%の重み）
- BGGの複雑さ評価（20%の重み）
- 推奨年齢からの複雑さ推定（20%の重み）
- メカニクスの数による補正（メカニクスが多いほど難易度が上がる）

#### 戦略の深さ

戦略の深さは、ゲームの戦略的側面の複雑さと深さを表し、以下の要素から計算されます：

- BGGの複雑さ評価（70%の重み）
- メカニクスの数に基づく要素（30%の重み）
- ゲームの人気順位（ランキング）による補正（人気ゲームは戦略的深さが評価されている傾向）

#### 学習曲線タイプ

学習曲線タイプは、ゲームの学習難易度の推移を表し、以下のタイプに分類されます：

- **緩やか**: 初期障壁が低く、すぐに遊べるようになるゲーム
- **中程度**: 中程度の初期障壁があるゲーム
- **急**: 初期障壁が高く、始めるのに時間がかかるゲーム
- **初期は急だが習得後は上達しやすい**: 最初は難しいが、基本を理解すると上達が早いゲーム
- **中程度で習得後は上達しやすい**: 中程度の学習曲線で、習得すれば上達しやすいゲーム

#### リプレイ性

リプレイ性は、ゲームを繰り返し遊ぶ価値と多様性を表し、以下の要素から計算されます：

- 基本スコア（2.0）をベースに調整
- メカニクスの多様性（最大0.7ポイント）
- リプレイ性を高めるメカニクスの評価（最大0.8ポイント）
- カテゴリの多様性（最大0.4ポイント）
- ランキングからの補正（最大0.6ポイント）
- 長期的な人気による補正（発行から長い期間が経過しているゲームは評価が高い）

#### 対象プレイヤータイプ

対象プレイヤータイプは、どのようなプレイヤーにゲームが適しているかを表し、以下のタイプに分類されます：

- **初心者**: 初期障壁が低く、戦略的深さも浅いゲーム
- **カジュアルプレイヤー**: 初期障壁が中程度以下で、戦略的深さもそれほど高くないゲーム
- **熟練プレイヤー**: 戦略的深さが高いゲーム
- **ハードコアゲーマー**: 初期障壁が高く、戦略的深さも高いゲーム
- **システムマスター**: メカニクスが多く、戦略的深さが高いゲーム
- **リプレイヤー**: リプレイ性が高いゲーム
- **トレンドフォロワー**: 高ランキングのゲーム
- **クラシック愛好家**: 長年遊ばれている定番ゲーム

## データ保存形式

ゲームデータはYAML形式で保存され、以下の情報が含まれます：

- 基本情報（ゲーム名、英語名、日本語名、発行年など）
- 詳細情報（プレイ人数、推奨年齢、プレイ時間など）
- メカニクスとカテゴリ
- デザイナーとパブリッシャー
- 評価情報（平均評価、複雑さ評価、ランキング）
- ラーニングカーブ分析結果

保存されたデータは `game_data` ディレクトリに格納され、ファイル名は `ゲームID_ゲーム名.yaml` の形式になります。

## ファイル構成

- `app.py` - メインアプリケーション（Streamlit UI）
- `bgg_api.py` - BoardGameGeek APIとの通信を行う関数
- `data_handler.py` - データ保存・変換を扱う関数
- `learning_curve.py` - 学習曲線分析のロジック
- `mechanic_complexity.py` - メカニクスの複雑さ評価を扱う関数
- `ui_components.py` - UIコンポーネント関数
- `mechanics_data.yaml` - メカニクスの複雑さデータ
- `requirements.txt` - 必要なパッケージのリスト

## 注意事項

- BoardGameGeek APIの使用には制限があり、短時間に多数のリクエストを送ると一時的にブロックされる場合があります
- 初回起動時に `mechanics_data.yaml` が存在しない場合は自動的に初期データが作成されます
- ゲーム名に特殊文字（:;など）が含まれていると、ファイル保存に失敗する場合があります
- このツールは学習曲線分析アルゴリズムが主観的要素を含み、絶対的な評価ではありません

## ライセンス

このプロジェクトはオープンソースであり、自由に使用・改変できます。

## 謝辞

- このアプリケーションはBoardGameGeek APIを使用しています。BoardGameGeekに感謝します。
- ボードゲームのメカニクス複雑さデータを提供してくれたボードゲームコミュニティに感謝します。
